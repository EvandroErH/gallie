<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/resources/templates/padrao.xhtml">
    <ui:define name="main">
        <style type="text/css">
            .ui-g input {
                width: 100%;
            }
            .ui-g select {
                width: 100%;
            }
        </style>
        <section class="well1">
            <div class="container">
                <p:outputPanel styleClass="tabGeral">
                    <p:tabView rendered="#{empty pessoaController.pessoaFicha}">
                        <p:ajax event="tabChange" listener="#{pessoaController.onTabPessoaFichaChange}" update="@(.tabGeral)" global="false"/>
                        <p:tab title="Cadastros pendentes" titletip="PENDENTE">
                            <h2>
                                <p:commandLink actionListener="#{pessoaController.listarPessoaFicha('PENDENTE')}" update="@(.tabGeral)"
                                               title="Clique aqui para atualizar a listagem">
                                    <h:outputText value="Pendentes"/>
                                </p:commandLink>
                            </h2>
                            <p>Os cadastros abaixo estão aguardando a avaliação de suas informações cadastrais para iniciar as atividades de revenda:</p>
                            <p:dataTable value="#{pessoaController.listaPessoaFicha}" var="c" paginator="true" rows="10" rowsPerPageTemplate="10,25,50">
                                <p:column headerText="Código" style="text-align: center; width: 50px;" sortBy="#{c.id}">
                                    <h:outputText value="#{c.id}"/>
                                </p:column>
                                <p:column headerText="Nome" filterBy="#{c.nome}" sortBy="#{c.nome}">
                                    <h:outputText value="#{c.nome}" style="text-transform: uppercase;"/>
                                </p:column>
                                <p:column headerText="Celular" style="text-align: center; width: 100px;" filterBy="#{c.celular}" sortBy="#{c.celular}">
                                    <h:outputText value="#{c.celular}"/>
                                </p:column>
                                <p:column headerText="Cidade" style="text-align: center; width: 200px;" filterBy="#{c.cidade}" sortBy="#{c.cidade}">
                                    <h:outputText value="#{c.cidade}"/>
                                </p:column>
                                <p:column headerText="Status" style="text-align: center; width: 85px;">
                                    <h:outputText value="#{c.status}"/>
                                </p:column>
                                <p:column headerText="Data" style="text-align: center; width: 100px;" sortBy="#{c.id}">
                                    <h:outputText value=" - "/>
                                </p:column>
                                <p:column headerText="#" style="text-align: center; width: 35px;">
                                    <p:commandButton icon="fa-edit" actionListener="#{pessoaController.selecionarPessoaFicha(c)}" update="@(.tabGeral)"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="Cadastros aprovados" titletip="APROVADO">
                            <h2>
                                <p:commandLink actionListener="#{pessoaController.listarPessoaFicha('APROVADO')}" update="@(.tabGeral)"
                                               title="Clique aqui para atualizar a listagem">
                                    <h:outputText value="Aprovados"/>
                                </p:commandLink>
                            </h2>
                            <p>Listagem de cadastros aprovados para iniciar a atividade de revenda:</p>
                            <p:dataTable value="#{pessoaController.listaPessoaFicha}" var="c" paginator="true" rows="10" rowsPerPageTemplate="10,25,50">
                                <p:column headerText="Código" style="text-align: center; width: 50px;" sortBy="#{c.id}">
                                    <h:outputText value="#{c.id}"/>
                                </p:column>
                                <p:column headerText="Nome" filterBy="#{c.nome}" sortBy="#{c.nome}">
                                    <h:outputText value="#{c.nome}" style="text-transform: uppercase;"/>
                                </p:column>
                                <p:column headerText="Celular" style="text-align: center; width: 100px;" filterBy="#{c.celular}" sortBy="#{c.celular}">
                                    <h:outputText value="#{c.celular}"/>
                                </p:column>
                                <p:column headerText="Cidade" style="text-align: center; width: 200px;" filterBy="#{c.cidade}" sortBy="#{c.cidade}">
                                    <h:outputText value="#{c.cidade}"/>
                                </p:column>
                                <p:column headerText="Status" style="text-align: center; width: 85px;">
                                    <h:outputText value="#{c.status}"/>
                                </p:column>
                                <p:column headerText="Data" style="text-align: center; width: 100px;" sortBy="#{c.id}">
                                    <h:outputText value=" - "/>
                                </p:column>
                                <p:column headerText="#" style="text-align: center; width: 35px;">
                                    <p:commandButton icon="fa-edit" actionListener="#{pessoaController.selecionarPessoaFicha(c)}" update="@(.tabGeral)"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="Cadastros rejeitados" titletip="REJEITADO">
                            <h2>
                                <p:commandLink actionListener="#{pessoaController.listarPessoaFicha('REJEITADO')}" update="@(.tabGeral)"
                                               title="Clique aqui para atualizar a listagem">
                                    <h:outputText value="Rejeitados"/>
                                </p:commandLink>
                            </h2>
                            <p>Listagem de cadastros não aprovados:</p>
                            <p:dataTable value="#{pessoaController.listaPessoaFicha}" var="c" paginator="true" rows="10" rowsPerPageTemplate="10,25,50">
                                <p:column headerText="Código" style="text-align: center; width: 50px;" sortBy="#{c.id}">
                                    <h:outputText value="#{c.id}"/>
                                </p:column>
                                <p:column headerText="Nome" filterBy="#{c.nome}" sortBy="#{c.nome}">
                                    <h:outputText value="#{c.nome}" style="text-transform: uppercase;"/>
                                </p:column>
                                <p:column headerText="Celular" style="text-align: center; width: 100px;" filterBy="#{c.celular}" sortBy="#{c.celular}">
                                    <h:outputText value="#{c.celular}"/>
                                </p:column>
                                <p:column headerText="Cidade" style="text-align: center; width: 200px;" filterBy="#{c.cidade}" sortBy="#{c.cidade}">
                                    <h:outputText value="#{c.cidade}"/>
                                </p:column>
                                <p:column headerText="Status" style="text-align: center; width: 85px;">
                                    <h:outputText value="#{c.status}"/>
                                </p:column>
                                <p:column headerText="Data" style="text-align: center; width: 100px;" sortBy="#{c.id}">
                                    <h:outputText value=" - "/>
                                </p:column>
                                <p:column headerText="#" style="text-align: center; width: 35px;">
                                    <p:commandButton icon="fa-edit" actionListener="#{pessoaController.selecionarPessoaFicha(c)}" update="@(.tabGeral)"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="Agenda" titletip="AGENDA">
                            <p:schedule value="#{pessoaController.pessoaAgendaModel}" timeZone="GMT-3"/>
                        </p:tab>
                    </p:tabView>
                    
                    <p:outputPanel rendered="#{not empty pessoaController.pessoaFicha}">
                        <p:remoteCommand name="rc" update="@(.pfe)" actionListener="#{pessoaController.atualizarPessoaFichaCep()}" immediate="true" process="@this"/>
                        
                        <div class="fichaGeral">
                            <h3>
                                <h:outputText value="#{pessoaController.pessoaFicha.id}"/>
                                <h:outputText value=" - "/>
                                <h:outputText value="#{pessoaController.pessoaFicha.nome}"/>
                            </h3>
                            <div style="margin: 10px;"/>
                            <p:outputPanel id="mailform" styleClass="mailform">
                                <fieldset class="row">
                                    <label class="grid_8" style="margin-top: 0px;">
                                        <span>Nome completo</span> 
                                        <p:inputText id="name" value="#{pessoaController.pessoaFicha.nome}"
                                                     label="Nome completo" required="true"/>
                                    </label>
                                    <label class="grid_4" style="margin-top: 0px;">
                                        <span>E-mail</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.email}"
                                                     label="E-mail" required="true"/>
                                    </label>
                                    <label class="grid_4">
                                        <span>Data de nascimento</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.dataNascimento}"
                                                     label="Data de nascimento" required="true"/>
                                    </label>
                                    <label class="grid_4">
                                        <span>Celular</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.celular}"/>
                                    </label>
                                    <label class="grid_4">
                                        <span>Telefone</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.telefone}"/>
                                    </label>
                                    <label class="grid_2">
                                        <span>CEP</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.cep}"
                                                     label="Cep" required="true" maxlength="9">
                                            <p:ajax event="blur" oncomplete="rc()" partialSubmit="true" process="@this"/>
                                        </p:inputText>
                                    </label>
                                    <label class="grid_8">
                                        <span>Endereço</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.endereco}"
                                                     label="Endereço" required="true" styleClass="pfe"/>
                                    </label>
                                    <label class="grid_2">
                                        <span>Número</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.numero}"
                                                     styleClass="pfe"/>
                                    </label>
                                    <label class="grid_5">
                                        <span>Bairro</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.bairro}"
                                                     label="Bairro" required="true" styleClass="pfe"/>
                                    </label>
                                    <label class="grid_5">
                                        <span>Cidade</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.cidade}"
                                                     label="Cidade" required="true" styleClass="pfe"/>
                                    </label>
                                    <label class="grid_2">
                                        <span>Estado</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.uf}"
                                                     label="Estado" required="true" styleClass="pfe"
                                                     maxlength="2" style="text-transform: uppercase;"/>
                                    </label>
                                    <label class="grid_12">
                                        <span>Complemento</span> 
                                        <p:inputText value="#{pessoaController.pessoaFicha.complemento}"/>
                                    </label>
                                    <div class="mfControls grid_12" style="margin-top: 0px;">
                                        <p:commandButton actionListener="#{pessoaController.cancelarPessoaFicha()}" 
                                                         update="@(.tabGeral)" 
                                                         styleClass="btn" value="Voltar"
                                                         immediate="true"
                                                         style="margin-right: 10px;"/>
                                        <p:commandButton actionListener="#{pessoaController.salvarPessoaFicha()}"
                                                         update="@(.tabGeral,.messages)" 
                                                         styleClass="btn" value="Salvar"/>
                                    </div>
                                </fieldset>
                            </p:outputPanel>                                
                        </div>
                    </p:outputPanel>
                </p:outputPanel>
            </div>
        </section>
        <script type="text/javascript">
            jQuery('.pg0').addClass('active');
        </script>
    </ui:define>
</ui:composition>